#include <stdio.h>
#include <conio.h>
#include <Windows.h>

int place[10][40] = { {0} };

void gotoxy(int row, int col);

void gotoxy(int row, int col) {
	COORD pos = { col, row }; // 행, 열반대로전달
	SetConsoleCursorPosition(
		GetStdHandle(STD_OUTPUT_HANDLE),
		pos
	);
}


int main() {
	int pt[5][2] = { {2,33},{3,33},{4,33},{5,33},{6,33} }, i;

	for (i = 0; i < 9; i++) {
		for (int j = 0; j < 35; j++) {
			if (i == 0 || i == 8) {
				place[i][j] = 5;
			}
			if (j == 0 || j == 34) {
				place[i][j] = 5;
			}
		}
	}
	for (i = 3; i <= 5; i++)
		place[i][1] = 6;
	for (i = 0; i < 5; i++) {
		place[pt[i][0]][pt[i][1]] = i;
	}

	//////////////////////////////////////////////////////////////////////////////////////////////출력

	for (i = 0; i < 9; i++) {
		for (int j = 0; j < 35; j++) {
			if (place[i][j] == 5)
				printf("*");
			else if (place[i][j] == 0)
				if (pt[0][0] == i && pt[0][1] == j)
					printf("%d", place[i][j]);
				else
					printf(" ");
			else if (place[i][j] == 6)
				printf("#");
			else
				printf("%d", place[i][j]);
		}
		printf("\n");
	}

	//////////////////////////////////////////////////////////////////////////////////
	int tick = 0, dir = 4, fast = 1000, yunghi_cnt = 0;
	int dx[5] = { -1, 1, 0, 0, 0 };
	int dy[5] = { 0, 0, -1, 1, 0 };
	char yunghi[20] = { '무','궁','화','꽃','이','피','었','습','니','다' };

	while (1) {
		if (_kbhit()) {
			// 키입력은loop 돌때마다확인
			int key = _getch();
			if (key == 224) {
				key = _getch();
				switch (key) {
				case 75: dir = 2; break;
				case 77: dir = 3; break;
				case 72: dir = 0; break;
				case 80: dir = 1; break;
				}
			}
			else if (key == 'q') {
				break;
			}
		}

		if (tick % 100 == 0) {
			gotoxy(pt[0][0], pt[0][1]);
			printf(" ");  // 지우고
			pt[0][0] += dx[dir];
			pt[0][1] += dy[dir];  // 이동
			gotoxy(pt[0][0], pt[0][1]);
			printf("0");  // 새위치에출력
			dir = 4;
		}

		if (tick % fast == 0) {
			gotoxy(9, yunghi_cnt * 2);
			printf("%c ", yunghi[yunghi_cnt]);
			yunghi_cnt++;
			if (yunghi_cnt == 10) {
				for (i = 0; i <= 9; i++) { gotoxy(9, i * 2);  printf(" "); }
				yunghi_cnt = 0;
			}
		}

		Sleep(10);
		tick += 10;
	}

}
