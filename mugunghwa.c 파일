#include <stdio.h>
#include <conio.h>
#include <Windows.h>

int place[10][40] = { {0} };
int tick = 0;

void mugunghwa(void);
void tick_mugunghwa(void);

// 무궁화 문장 출력
void tick_mugunghwa(void) {
	if (tick == 100) {
		gotoxy(10, 1);
		printf("무");
	}
	else if (tick == 300) {
		gotoxy(10, 3);
		printf("궁");
	}
	else if (tick == 700) {
		gotoxy(10, 5);
		printf("화");
	}
	else if (tick == 1100) {
		gotoxy(10, 7);
		printf("꽃");
	}
	else if (tick == 1500) {
		gotoxy(10, 9);
		printf("이");
	}
	else if (tick == 1800) {
		gotoxy(10, 11);
		printf("피");
	}
	else if (tick == 2000) {
		gotoxy(10, 13);
		printf("었");
	}
	else if (tick == 2100) {
		gotoxy(10, 15);
		printf("습");
	}
	else if (tick == 2300) {
		gotoxy(10, 17);
		printf("니");
	}
	else if (tick == 2500) {
		gotoxy(10, 19);
		printf("다");
	}
	else if (tick == 5300) {
		for (int i = 10; i <= 10; i++) {
			for (int j = 1; j <= 19; j += 2) {
				gotoxy(i, j);
				printf(" ");
			}
		}
	}
	else if (tick > 5300) {
		tick = 0;
	}
}

void mugunghwa(void) {

	int pt[5][2] = { {2,33},{3,33},{4,33},{5,33},{6,33} }, i;

	for (i = 0; i < 9; i++) {
		for (int j = 0; j < 35; j++) {
			if (i == 0 || i == 8) {
				place[i][j] = 5;
			}
			if (j == 0 || j == 34) {
				place[i][j] = 5;
			}
		}
	}
	for (i = 3; i <= 5; i++)
		place[i][1] = 6;
	for (i = 0; i < 5; i++) {
		place[pt[i][0]][pt[i][1]] = i;
	}

	//////////////////////////////////////////////////////////////////////////////////////////////출력

	for (i = 0; i < 9; i++) {
		for (int j = 0; j < 35; j++) {
			if (place[i][j] == 5)
				printf("*");
			else if (place[i][j] == 0)
				if (pt[0][0] == i && pt[0][1] == j)
					printf("%d", place[i][j]);
				else
					printf(" ");
			else if (place[i][j] == 6)
				printf("#");
			else
				printf("%d", place[i][j]);
		}
		printf("\n");
	}

	//////////////////////////////////////////////////////////////////////////////////
	int  dir = 4;
	int dx[5] = { -1, 1, 0, 0, 0 };
	int dy[5] = { 0, 0, -1, 1, 0 };

	while (1) {
		if (_kbhit()) {
			// 키입력은loop 돌때마다확인
			int key = _getch();
			if (key == 224) {
				key = _getch();
				switch (key) {
				case 75: dir = 2; break;
				case 77: dir = 3; break;
				case 72: dir = 0; break;
				case 80: dir = 1; break;
				}
			}
			else if (key == 'q') {
				break;
			}
		}

		if (tick % 100 == 0) {
			gotoxy(pt[0][0], pt[0][1]);
			printf(" ");  // 지우고
			pt[0][0] += dx[dir];
			pt[0][1] += dy[dir];  // 이동
			gotoxy(pt[0][0], pt[0][1]);
			printf("0");  // 새위치에출력
			dir = 4;
		}

		Sleep(10);
		tick += 10;
		tick_mugunghwa();
	}
}
